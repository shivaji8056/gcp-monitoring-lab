# gcp-monitoring-lab
Hands-on Cloud Monitoring Lab for Google Cloud

# ☁️ Cloud Monitoring: Qwik Start 🚀

## ✨ Overview ✨

This lab provides a hands-on introduction to Cloud Monitoring, a powerful tool for gaining visibility into the performance, uptime, and overall health of your cloud-powered applications. 🔍 Cloud Monitoring collects metrics, events, and metadata from Google Cloud, Amazon Web Services, and various application components. 📊 It then uses this data to generate insights through dashboards, charts, and alerts, enabling you to proactively manage your infrastructure and applications. 🛡️

In this lab, you will learn how to install monitoring and logging agents on a Compute Engine instance to collect valuable information, including metrics and logs from third-party applications. 📝

## 🎯 Objectives 🎯

In this lab, you will learn how to:

*   Monitor a Compute Engine virtual machine (VM) instance with Cloud Monitoring. 🖥️
*   Install monitoring and logging agents for your VM. ⚙️
*   Create an uptime check to verify resource accessibility. ✅
*   Create an alerting policy to receive notifications based on metric thresholds. 🚨
*   Build a custom dashboard with charts to visualize key metrics. 📈
*   Explore Cloud Logging to analyze logs generated by your VM instance. 🪵

## ⚙️ Setup and Requirements ⚙️

Before starting the lab, ensure you have:

*   Access to a standard internet browser (Chrome recommended). 🌐
*   An Incognito or private browser window to avoid account conflicts. 👤
*   Sufficient time to complete the lab (approximately 50 minutes). ⏱️

**Important:** Use only the student account provided for this lab. Using your personal Google Cloud account may incur charges. ⚠️

## 👨‍💻 Lab Instructions 👨‍💻

### 1. Start the Lab and Sign in to the Google Cloud Console

1.  Click the **Start Lab** button. ▶️
2.  If prompted, select your payment method. 💳
3.  On the left, find the **Lab Details** pane. ℹ️
4.  Click **Open Google Cloud console** (or right-click and select **Open Link in Incognito Window**). 🖱️
5.  Copy the **Username** from the Lab Details pane and paste it into the Sign in dialog. Click **Next**. ➡️
6.  Copy the **Password** from the Lab Details pane and paste it into the Welcome dialog. Click **Next**. ➡️
7.  Accept the terms and conditions. 👍
8.  Do not add recovery options or two-factor authentication. 🚫
9.  Do not sign up for free trials. 🚫
10. The Google Cloud console will open in a new tab. ☁️

### 2. Activate Cloud Shell

1.  Click the **Activate Cloud Shell** icon at the top of the Google Cloud console. 🐚
2.  Click **Continue** through the Cloud Shell information window. ➡️
3.  Authorize Cloud Shell to use your credentials. ✅
4.  Once connected, you are authenticated, and the project is set to your Project ID. 🔑

### 3. Set Your Region and Zone

Run the following commands in Cloud Shell to set the default region and zone for your lab:

```bash
gcloud config set compute/zone "ZONE"
export ZONE=$(gcloud config get compute/zone)

gcloud config set compute/region "REGION"
export REGION=$(gcloud config get compute/region)


Replace ZONE and REGION with the appropriate values for your lab environment. 🌍

### Task 1: Create a Compute Engine Instance

In the Cloud console, navigate to Compute Engine > VM Instances. 🖥️
Click Create instance. ➕
Fill in the fields as follows:
Name: lamp-1-vm 🏷️
Region: <REGION> 📍
Zone: <ZONE> 📍
Series: E2 ⚙️
Machine type: e2-medium ⚙️
Click OS and storage and select:
Boot Disk: Debian GNU/Linux 12 (bookworm) 💾
Click Networking and select:
Firewall: Allow HTTP traffic 🔥
Click Create to launch the instance. 🚀
Wait for the instance to launch (indicated by a green checkmark). ✅

### Task 2: Add Apache2 HTTP Server to Your Instance

In the Console, click SSH in line with lamp-1-vm to open a terminal to your instance. 💻
Run the following commands in the SSH window:
sudo apt-get update
sudo apt-get install apache2 php7.0


When asked if you want to continue, enter Y. If php7.0 fails to install, try php5.

sudo service apache2 restart

Return to the Cloud Console, on the VM instances page. Click the External IP for lamp-1-vm instance to see the Apache2 default page for this instance. 🌐

### Task 3: Create a Monitoring Metrics Scope

In the Cloud Console, navigate to Navigation menu > View All Products > Observability > Monitoring. 👁️
When the Monitoring Overview page opens, your metrics scope project is ready. ✅

### Task 4: Install the Monitoring and Logging Agents

In the SSH terminal of your VM instance, run the following commands to install the Cloud Monitoring agent:
curl -sSO https://dl.google.com/cloudagents/add-google-cloud-ops-agent-repo.sh
sudo bash add-google-cloud-ops-agent-repo.sh --also-install


If asked if you want to continue, press Y. 2. Run the following commands to install the Cloud Logging agent:

sudo systemctl status google-cloud-ops-agent"*"


Press q to exit the status.

sudo apt-get update


### Task 5: Create an Uptime Check

In the Cloud Console, navigate to Navigation menu > Monitoring > Uptime checks. ⏰
Click Create Uptime Check. ➕
Configure the uptime check as follows:
Protocol: HTTP 🌐
Resource Type: Instance 🖥️
Instance: lamp-1-vm 🏷️
Check Frequency: 1 minute ⏱️
Click Continue through the Response Validation and Alert & Notification sections, accepting the defaults. ➡️
Title: Lamp Uptime Check 🏷️
Click Test to verify the connection. ✅
Click Create. ➕

### Task 6: Create an Alerting Policy

In the Cloud Console, navigate to Navigation menu > Monitoring > Alerting. 🚨
Click +Create Policy. ➕
Click on Select a metric dropdown. Uncheck the Active. ⬇️
Type Network traffic in filter by resource and metric name and click on VM instance > Interface. Select Network traffic (agent.googleapis.com/interface/traffic) and click Apply. 🌐
Click Next. ➡️
Set the Threshold position to Above threshold, Threshold value to 500 and Advanced Options > Retest window to 1 min. Click Next. ➡️
Click on the drop down arrow next to Notification Channels, then click on Manage Notification Channels. 🔔
A Notification channels page will open in a new tab. 📄
Scroll down the page and click on ADD NEW for Email. 📧
In the Create Email Channel dialog box, enter your personal email address in the Email Address field and a Display name. 🏷️
Click on Save. 💾
Go back to the previous Create alerting policy tab. 🔙
Click on Notification Channels again, then click on the Refresh icon to get the display name you mentioned in the previous step. 🔄
Click on Notification Channels again if necessary, select your Display name and click OK. ✅
Add a message in documentation, which will be included in the emailed alert. 📝
Mention the Alert name as Inbound Traffic Alert. 🏷️
Click Next. ➡️
Review the alert and click Create Policy. ➕

### Task 7: Create a Dashboard and Chart

In the Cloud Console, navigate to Navigation menu > Monitoring > Dashboards. 📊
Click +Create Custom Dashboard. ➕
Name the dashboard Cloud Monitoring LAMP Qwik Start Dashboard. 🏷️
Add the first chart:
Click + ADD WIDGET. ➕
Select the Line option under Visualization. 📈
Widget title: CPU Load 🏷️
Click on Select a metric dropdown. Uncheck the Active. ⬇️
Type CPU load (1m) in filter by resource and metric name and click on VM instance > Cpu. Select CPU load (1m) and click Apply. ⚙️
Add the second chart:
Click + ADD WIDGET and select Line option under Visualization. 📈
Widget title: Received Packets 🏷️
Click on Select a metric dropdown. Uncheck the Active. ⬇️
Type Received packets in filter by resource and metric name and click on VM instance > Instance. Select Received packets and click Apply. 🌐

### Task 8: View Your Logs

In the Cloud Console, navigate to Navigation menu > Logging > Logs Explorer. 🪵
Select the logs for the lamp-1-vm instance:
Click on All Resource. 🌍
Select VM Instance > lamp-1-vm in the Resource drop-down menu. 🖥️
Click Apply. ✅
Observe the logs for your VM instance. 👀
Experiment with stopping and starting the VM instance and observe the corresponding log entries. 🔄

### Task 9: Check the Uptime Check Results and Triggered Alerts

In the Cloud Console, navigate to Navigation menu > Monitoring > Uptime checks. ⏰
Verify the status of the Lamp Uptime Check. It may take a few minutes for the regions to become active after restarting the instance. ✅
In the Cloud Console, navigate to Navigation menu > Monitoring > Alerting. 🚨
Check for any triggered incidents and events. 👀
Check your email account for Cloud Monitoring Alerts. 📧
🎉 Conclusion 🎉

Congratulations! You have successfully completed the Cloud Monitoring: Qwik Start lab. 🏆 You have learned how to monitor a Compute Engine instance, install monitoring and logging agents, create uptime checks and alerting policies, build a custom dashboard, and explore Cloud Logging. These skills will enable you to effectively monitor and manage your cloud-powered applications using Google Cloud Monitoring. 🚀 Keep learning and exploring! 🌟

